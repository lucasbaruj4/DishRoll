# Changelog

## 2026-02-11
- Continuing frontend refinement on onboarding and auth-related UX details.
- Backend feature work is queued next after onboarding polish is finalized.
- Fixed onboarding carousel card clipping and edge overflow behavior.
- Added animated onboarding background circles and scroll-linked pagination dots.
- Tuned card spacing and indicator sizing for cleaner slide transitions.
- Started planning the post-signup `initial_questionaire` flow for new users.
- Defined three-step questionnaire scope: available ingredients, allergies/disliked foods, and cooking level.
- Beginning implementation with the first questionnaire screen focused on ingredient selection UI.
- Added `initial_questionaire` route pipeline and wired signup redirect to the ingredient step.
- Implemented ingredient questionnaire UI with searchable quick-pick tiles backed by `ingredient_catalog`.
- Added persistence from ingredient questionnaire selections into `user_ingredients`.
- Added profile-based questionnaire gating so logged-in users are redirected to onboarding until setup is complete.
- Added dietary restriction source-of-truth schema: `dietary_restriction_catalog` + `user_dietary_restrictions` with RLS and seed options.
- Added fully implemented allergies/dislikes questionnaire step with searchable catalog UI and persistence to `user_dietary_restrictions`.
- Refactored questionnaire persistence into shared service utilities and renamed step state from `level` to `cooking_level` for clarity.
- Added normalized `cooking_level_catalog` (5-point scale) and implemented step 3 with a fixed-stop slider UI that saves selected level to user profile.
- Fixed onboarding resume routing so incomplete users return to their saved questionnaire step instead of always restarting at ingredients.
- Polished cooking-level slider interaction by locking page scroll during drag and fixing knob edge alignment at both track extremes.
- Added explicit Back buttons to all `initial_questionaire` steps (ingredients, allergies/dislikes, cooking level).
- Synced questionnaire progress state when navigating backward so resume returns to the correct previous step.
- Confirmed multi-select questionnaire persistence uses delete-then-insert on every Continue for both `user_ingredients` (questionnaire source) and `user_dietary_restrictions`.
- Tightened ingredient prefill in the questionnaire to only read rows with `source = 'questionnaire'`.
- Replaced in-screen Back buttons with iOS-style header back controls for all questionnaire steps.
- Fixed unreliable back navigation by routing header back actions directly to deterministic previous-step routes.
- Adjusted questionnaire navigation to use deterministic `router.replace(...)` transitions for both forward and backward step moves.
- Removed back-step profile rewrites that could incorrectly downgrade resume position from `cooking_level` to earlier steps.
- Hid header back controls while a save request is in progress to prevent duplicate navigation actions.
- Fixed root auth gate regression that forced users back to the persisted questionnaire step, which blocked intentional in-flow back navigation.
- Updated questionnaire step navigation to use stack semantics (`push` forward, `back` backward) for native linear transition direction.
- Added one-time initial questionnaire route sync on app bootstrap so reopen respects the persisted DB step without overriding in-flow back navigation.
- Tightened auth gating for incomplete users so only `initial_questionaire/*` routes are allowed, preventing onboarding/login detours from breaking questionnaire back-stack expectations.
- Updated questionnaire back flow to deterministic linear behavior: step 3 -> step 2 -> step 1 -> onboarding (no loop back to step 3).
- Adjusted incomplete-user auth gating to allow staying on onboarding and only resume questionnaire when re-entering, using persisted DB step sync.
- Updated onboarding CTA behavior for signed-in incomplete users to show `Resume setup` and route into questionnaire resume path.
- Hid onboarding header (`Welcome`) to remove redundant back navigation from the intro screen.
- Switched questionnaire back handlers to `dismissTo(...)` and configured `animationTypeForReplace: 'pop'` for questionnaire + onboarding routes to keep back-like iOS transitions on replace fallbacks.
- Disabled iOS swipe-back gestures on questionnaire screens so navigation advances/returns only through explicit controls.

## 2026-02-09
- Scaffolded Expo Router structure with auth and tab layouts.
- Added Supabase client setup with auth persistence.
- Implemented auth flow (login/signup) with protected routing.
- Added onboarding and kitchen selection screens.
- Built ingredient inventory CRUD + availability toggle.
- Added dev-only RLS sanity check.
- Created initial Supabase schema migration in `supabase/migrations/0001_init.sql`.
- Updated build plan progress tracking.
- Applied dark mode styling across key screens.
